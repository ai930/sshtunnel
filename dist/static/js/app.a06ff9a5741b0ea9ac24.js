webpackJsonp([1],{129:function(e,t){},35:function(e,t,r){function o(e){r(48)}var s=r(7)(r(86),r(45),o,null,null);e.exports=s.exports},36:function(e,t){},37:function(e,t,r){"use strict";var o=r(2),s=r(77),n=r(43),i=r.n(n),l=r(42),a=r.n(l);o.default.use(s.a),t.a=new s.a({mode:"history",routes:[{path:"/login",name:"login",component:i.a},{path:"/",name:"dashboard",component:a.a}]})},38:function(e,t,r){"use strict";var o=r(2),s=r(8),n=r(85),i=r(82),l=r(83),a=r(84);o.default.use(s.a),t.a=new s.a.Store({mutations:n.a,actions:i.a,getters:l.a,modules:{loginx:a.a}})},42:function(e,t,r){function o(e){r(49)}var s=r(7)(r(87),r(46),o,"data-v-fb0e231a",null);e.exports=s.exports},43:function(e,t,r){function o(e){r(47)}var s=r(7)(r(88),r(44),o,"data-v-0b3b8770",null);e.exports=s.exports},44:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login",style:e.winSize},[r("el-form",{ref:"loginForm",staticClass:"demo-ruleForm card-box loginform",style:e.formOffset,attrs:{model:e.loginForm,rules:e.rules,"label-position":"left","label-width":"100px"}},[r("h3",{staticClass:"title"},[r("span",[e._v("SSHTunel系统登录")])]),e._v(" "),r("el-form-item",{attrs:{label:"用户",prop:"user"}},[r("el-input",{attrs:{type:"input","auto-complete":"off"},model:{value:e.loginForm.user,callback:function(t){e.loginForm.user=t},expression:"loginForm.user"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.loginForm.pass,callback:function(t){e.loginForm.pass=t},expression:"loginForm.pass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("loginForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]}},45:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},staticRenderFns:[]}},46:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dashboard"},[r("el-menu",{staticClass:"el-menu-demo",attrs:{theme:"dark","default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[r("el-menu-item",{attrs:{index:"1"}},[e._v("端口映射列表")]),e._v(" "),r("el-menu-item",{attrs:{index:"5"}},[r("a",{attrs:{href:"https://github.com/farmerx/sshtunnel",target:"_blank"}},[r("i",{staticClass:"el-icon-message"}),e._v("Star On Github")])])],1),e._v(" "),r("div",{staticClass:"content"},["1"===e.activeIndex?r("div",[r("div",{staticClass:"btn"},[r("span",{staticClass:"wrapper"},[r("el-button",{attrs:{type:"success",icon:"share"},on:{click:function(t){e.dialogAddRemoteVisible=!0}}},[e._v("添加映射")]),e._v(" "),r("el-button",{attrs:{type:"success",icon:"delete"},on:{click:function(t){e.deleteRemoteServer()}}},[e._v("批量删除")])],1)]),e._v(" "),r("div",{staticClass:"table"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{label:"UUID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.uuid))]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"localaddr",label:"本地监听端口","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"remoteaddr",label:"映射端口地址","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{label:"SSH端口地址","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[e._v("SSHUser: "+e._s(t.row.sshUser))]),e._v(" "),r("p",[e._v("SSHPwd: "+e._s(t.row.sshPwd))]),e._v(" "),r("p",[e._v("SSHPubkey: "+e._s(t.row.sshpubkey))]),e._v(" "),r("div",{staticClass:"name-wrapper",slot:"reference"},[r("el-tag",[e._v(e._s(t.row.middleaddr))])],1)])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.ststus?r("div",[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("运行中...")])],1):e._e(),e._v(" "),!1===t.row.ststus?r("div",[r("el-button",{attrs:{size:"small",type:"danger"}},[e._v("已停止")])],1):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"日志信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",type:"info"},on:{click:function(r){e.showMsg(t.$index,t.row)}}},[r("i",{staticClass:"el-icon-warning"}),e._v("日志详情...")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[r("i",{staticClass:"el-icon-edit"})])],1),e._v(" "),r("span",[r("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(r){e.handleDelete(t.$index,t.row)}}},[r("i",{staticClass:"el-icon-delete"})])],1),e._v(" "),!0===t.row.ststus?r("span",[r("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(r){e.handleOperate(t.$index,t.row)}}},[e._v("停止")])],1):e._e(),e._v(" "),!1===t.row.ststus?r("span",[r("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(r){e.handleOperate(t.$index,t.row)}}},[e._v("启动")])],1):e._e()]}}])})],1)],1)]):e._e()]),e._v(" "),r("el-dialog",{attrs:{title:"添加映射",visible:e.dialogAddRemoteVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogAddRemoteVisible=t}}},[r("el-form",{ref:"remoteServerform",attrs:{rules:e.rules,"label-position":e.labelPosition,model:e.remoteServerform,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"localAddr",prop:"localAddr"}},[r("el-input",{model:{value:e.remoteServerform.localAddr,callback:function(t){e.remoteServerform.localAddr=t},expression:"remoteServerform.localAddr"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"remoteAddr",prop:"remoteAddr"}},[r("el-input",{model:{value:e.remoteServerform.remoteAddr,callback:function(t){e.remoteServerform.remoteAddr=t},expression:"remoteServerform.remoteAddr"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"sshServerAddr",prop:"middleAddr"}},[r("el-input",{model:{value:e.remoteServerform.middleAddr,callback:function(t){e.remoteServerform.middleAddr=t},expression:"remoteServerform.middleAddr"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"ssh用户",prop:"sshuser"}},[r("el-input",{model:{value:e.remoteServerform.sshuser,callback:function(t){e.remoteServerform.sshuser=t},expression:"remoteServerform.sshuser"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"ssh密码",prop:"sshpwd"}},[r("el-input",{attrs:{type:"password"},model:{value:e.remoteServerform.sshpwd,callback:function(t){e.remoteServerform.sshpwd=t},expression:"remoteServerform.sshpwd"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"ssh公钥文件路径",prop:"sshpubkey"}},[r("el-input",{model:{value:e.remoteServerform.sshpubkey,callback:function(t){e.remoteServerform.sshpubkey=t},expression:"remoteServerform.sshpubkey"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addsubmit("remoteServerform")}}},[e._v("立即添加")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("remoteServerform")}}},[e._v("重置")])],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogAddRemoteVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]}},47:function(e,t){},48:function(e,t){},49:function(e,t){},81:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(35),n=r.n(s),i=r(37),l=r(38),a=r(36),u=(r.n(a),r(39)),d=r.n(u),c=r(20),m=r.n(c);o.default.use(d.a),o.default.use(m.a),o.default.config.productionTip=!1,new o.default({el:"#app",router:i.a,store:l.a,template:"<App/>",components:{App:n.a}})},82:function(e,t,r){"use strict";t.a={}},83:function(e,t,r){"use strict";var o={LoginError:function(e){return e.loginx.LoginError},LoginFlag:function(e){return e.loginx.LoginFlag},Action:function(e){return e.loginx.Action},list:function(e){return e.loginx.list},ListErrorMsg:function(e){return e.loginx.ListErrorMsg},AddServerErrorMsg:function(e){return e.loginx.AddServerErrorMsg}};t.a=o},84:function(e,t,r){"use strict";var o=r(20),s=r.n(o),n=r(2),i=r(41);n.default.use(i.a);var l={state:{LoginError:"Delete Index Success.",LoginFlag:!1,Action:!1,list:[{uuid:"uuiidididididididi",localaddr:"127.0.0.1:9200",remoteaddr:"10.187.102.8:9200",middleaddr:"10.187.102.8:22",message:"Starting SSH Tunnel on 127.0.0.1:9200...",ststus:!0,sshPwd:"tianyan",sshUser:"root",sshpubkey:""}],ListErrorMsg:"",AddServerErrorMsg:""},mutations:{SET_LOGIN_ERROR:function(e,t){e.LoginError=t},SET_LOGIN_FLAG:function(e,t){e.LoginFlag=t},SET_ACTION:function(e,t){e.Action=t},SET_LIST:function(e,t){e.list=t},SET_LIST_ERROR_MSG:function(e,t){e.ListErrorMsg=t},SET_ADD_SERVER_ERROR_MSG:function(e,t){e.AddServerErrorMsg=t}},actions:{CookieSetUserInfo:function(e,t){var r=e.commit;n.default.http.post(t.url,t).then(function(e){0===e.body.result?(r("SET_LOGIN_ERROR",""),r("SET_LOGIN_FLAG",!0),r("SET_ACTION",!t.action),s.a.set("SSHTunnelUserInfo",t,{expires:"1D"})):(r("SET_LOGIN_ERROR",(new Date).toString()+e.body.errormsg),r("SET_LOGIN_FLAG",!1),r("SET_ACTION",!t.action))},function(e){r("SET_LOGIN_ERROR",(new Date).toString()+"服务器异常..."),r("SET_LOGIN_FLAG",!1),r("SET_ACTION",!t.action),console.log(e)})},GetServerList:function(e,t){var r=e.commit;n.default.http.post(t.url,t).then(function(e){0===e.body.result?(r("SET_LIST_ERROR_MSG",""),r("SET_LIST",e.body.data)):r("SET_LIST_ERROR_MSG",(new Date).toString()+e.body.errormsg)},function(e){r("SET_LIST_ERROR_MSG",(new Date).toString()+"服务器异常..."),console.log(e)})},handleOperate:function(e,t){var r=e.commit;n.default.http.post(t.url,t).then(function(e){0===e.body.result?(r("SET_ADD_SERVER_ERROR_MSG",""),r("SET_LIST",e.body.data)):r("SET_ADD_SERVER_ERROR_MSG",(new Date).toString()+e.body.errormsg)},function(e){r("SET_ADD_SERVER_ERROR_MSG",(new Date).toString()+"服务器异常..."),console.log(e)})},AddRemoteServer:function(e,t){var r=e.commit;n.default.http.post(t.url,t).then(function(e){0===e.body.result?(r("SET_ADD_SERVER_ERROR_MSG",""),r("SET_LIST",e.body.data)):r("SET_ADD_SERVER_ERROR_MSG",e.body.errormsg)},function(e){r("SET_ADD_SERVER_ERROR_MSG",(new Date).toString()+"服务器异常..."),console.log(e)})}}};t.a=l},85:function(e,t,r){"use strict";t.a={}},86:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},87:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(26),s=r.n(o),n=r(8);t.default={name:"dashboard",data:function(){var e=this,t=function(t,r,o){if(""===e.remoteServerform.sshpwd&&""===e.remoteServerform.sshpubkey)return o(new Error("ssh 密码和公钥不能同时为空."));o()};return{labelPosition:"right",remoteServerform:{url:"/addRemoteServer",localAddr:"",remoteAddr:"",middleAddr:"",sshuser:"",sshpwd:"",sshpubkey:"",uuid:""},rules:{localAddr:[{required:!0,message:"请输入本地监听端口",trigger:"blur"}],remoteAddr:[{required:!0,message:"请输入远程服务映射端口",trigger:"blur"}],middleAddr:[{required:!0,message:"请输入ssh服务host和port",trigger:"blur"}],sshuser:[{required:!0,message:"请输入ssh登录的用户名",trigger:"blur"}],sshpwd:[{validator:t,trigger:"blur"}],sshpubkey:[{validator:t,trigger:"blur"}]},dialogAddRemoteVisible:!1,activeIndex:"1",multipleSelection:[]}},methods:{handleDelete:function(e,t){alert("暂时不支持删除功能")},handleEdit:function(e,t){this.remoteServerform={url:"/addRemoteServer",localAddr:t.localaddr,remoteAddr:t.remoteaddr,middleAddr:t.middleaddr,sshuser:t.sshUser,sshpwd:t.sshPwd,sshpubkey:t.sshpubkey,uuid:t.uuid},this.dialogAddRemoteVisible=!0},handleOperate:function(e,t){t.ststus?t.operate="stop":t.operate="start",t.url="/operateRemoteServer",this.$store.dispatch("handleOperate",t)},addsubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$store.dispatch("AddRemoteServer",t.remoteServerform),t.dialogAddRemoteVisible=!1})},resetForm:function(e){this.$refs[e].resetFields()},handleSelectionChange:function(e){this.multipleSelection=e},addRemoteServer:function(){alert("xxxxx")},deleteRemoteServer:function(){alert("暂不支持批量删除")},translate:function(e){return e?"运行中":"停止"},handleSelect:function(e,t){this.activeIndex=e}},computed:s()({},r.i(n.b)(["LoginError","LoginFlag","Action","list","ListErrorMsg","AddServerErrorMsg"])),watch:{Action:function(){!1===this.LoginFlag?this.$message.error(this.LoginError):this.$router.push({path:"/"})},ListErrorMsg:function(){this.$message.error(this.ListErrorMsg)},AddServerErrorMsg:function(){this.$message.error(this.AddServerErrorMsg)}},created:function(){if(null!==this.$cookie.get("SSHTunnelUserInfo"))this.$router.push({path:"/"});else{var e={url:"/getremoteserverlist"};this.$store.dispatch("GetServerList",e)}}}},88:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(26),s=r.n(o),n=r(8);t.default={name:"login",data:function(){return{winSize:{width:"",height:""},formOffset:{position:"absolute",left:"",top:""},loginForm:{pass:"",user:""},rules:{pass:[{validator:function(e,t,r){return""===t?r(new Error("请输入密码")):t.length<5?r(new Error("密码长度不小于五个字符")):void r()},trigger:"blur"}],user:[{validator:function(e,t,r){return""===t?r(new Error("请输入用户名")):t.length<5?r(new Error("用户名长度不小于五个字符")):void r()},trigger:"blur"}]}}},methods:{setSize:function(){this.winSize.width=window.innerWidth+"px",this.winSize.height=window.innerHeight+"px",this.formOffset.left=parseInt(this.winSize.width)/2-175+"px",this.formOffset.top=parseInt(this.winSize.height)/2-178+"px"},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var r={url:"/login.json",pass:t.loginForm.pass,user:t.loginForm.user,action:t.Action};t.$store.dispatch("CookieSetUserInfo",r)})},resetForm:function(e){this.$refs[e].resetFields()}},computed:s()({},r.i(n.b)(["LoginError","LoginFlag","Action"])),watch:{Action:function(){!1===this.LoginFlag?this.$message.error(this.LoginError):this.$router.push({path:"/"})}},created:function(){this.setSize(),null!==this.$cookie.get("SSHTunnelUserInfo")&&this.$router.push({path:"/"})}}}},[81]);
//# sourceMappingURL=app.a06ff9a5741b0ea9ac24.js.map